{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _slicedToArray from\"D:/Alumni/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{Link,useHistory}from'react-router-dom';import M from'materialize-css';var CreatePost=function CreatePost(){var history=useHistory();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),title=_useState2[0],setTitle=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),body=_useState4[0],setBody=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),image=_useState6[0],setImage=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),url=_useState8[0],setUrl=_useState8[1];useEffect(function(){if(url){fetch(\"/create\",{method:\"post\",headers:{\"Content-Type\":\"application/json\",\"Authorization\":\"Bearer \"+localStorage.getItem(\"jwt\")},body:JSON.stringify({title:title,body:body,pic:url})}).then(function(res){return res.json();}).then(function(data){console.log(data);if(data.error){M.toast({html:data.error,classes:\"#c62828 red darken-3\"});}else{M.toast({html:\"Posted\",classes:\"#43a047 green darken-1\"});history.push('/');}}).catch(function(err){console.log(err);});}},[url]);var postDetails=function postDetails(){var data=new FormData();data.append(\"file\",image);data.append(\"upload_preset\",\"alumni-tracker\");data.append(\"cloud_name\",\"aditicloudinary1\");fetch(\"https://api.cloudinary.com/v1_1/aditicloudinary1/image/upload\",{method:\"post\",body:data}).then(function(res){return res.json();}).then(function(data){setUrl(data.url);}).catch(function(err){console.log(err);});};return/*#__PURE__*/_jsxs(\"div\",{className:\"card input-field\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"title\",value:title,onChange:function onChange(e){return setTitle(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"body\",value:body,onChange:function onChange(e){return setBody(e.target.value);}}),/*#__PURE__*/_jsxs(\"div\",{className:\"file-field input-field\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"btn black\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Upload\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:function onChange(e){return setImage(e.target.files[0]);}})]}),/*#__PURE__*/_jsx(\"div\",{className:\"file-path-wrapper\",children:/*#__PURE__*/_jsx(\"input\",{className:\"file-path validate\",type:\"text\"})})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn waves-effect waves-light black \",onClick:function onClick(){return postDetails();},children:\"POST\"})]});};export default CreatePost;","map":{"version":3,"sources":["D:/Alumni/client/src/components/screens/CreatePost.js"],"names":["React","useState","useEffect","Link","useHistory","M","CreatePost","history","title","setTitle","body","setBody","image","setImage","url","setUrl","fetch","method","headers","localStorage","getItem","JSON","stringify","pic","then","res","json","data","console","log","error","toast","html","classes","push","catch","err","postDetails","FormData","append","e","target","value","files"],"mappings":"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","sourcesContent":["import React,{useState,useEffect} from 'react'\r\nimport {Link,useHistory} from 'react-router-dom'\r\nimport M from 'materialize-css'\r\n\r\n\r\nconst CreatePost =()=>{\r\n    const history=useHistory()\r\n    const[title,setTitle]=useState(\"\")\r\n    const[body,setBody]=useState(\"\")\r\n    const[image,setImage]=useState(\"\")\r\n    const[url,setUrl]=useState(\"\")\r\n\r\n    useEffect(()=>{\r\n       if(url){ \r\n            fetch(\"/create\",{\r\n                method:\"post\",\r\n                headers:{\r\n                    \"Content-Type\":\"application/json\",\r\n                    \"Authorization\":\"Bearer \"+localStorage.getItem(\"jwt\")\r\n                },\r\n                body:JSON.stringify({\r\n                    title,\r\n                    body,\r\n                    pic:url,\r\n                })\r\n            }).then(res=>res.json())\r\n            .then(data=>{\r\n                console.log(data)\r\n            if(data.error){\r\n                M.toast({html: data.error,classes:\"#c62828 red darken-3\"})\r\n            }\r\n            else{\r\n                M.toast({html:\"Posted\",classes:\"#43a047 green darken-1\"})\r\n                history.push('/')\r\n            }\r\n            }).catch(err=>{\r\n                console.log(err)\r\n            })\r\n        }\r\n\r\n    },[url])\r\n\r\n    const postDetails=()=>{\r\n        const data=new FormData()\r\n        data.append(\"file\",image)\r\n        data.append(\"upload_preset\",\"alumni-tracker\")\r\n        data.append(\"cloud_name\",\"aditicloudinary1\")\r\n        fetch(\"https://api.cloudinary.com/v1_1/aditicloudinary1/image/upload\",{\r\n            method:\"post\",\r\n            body:data\r\n        })\r\n        .then(res=>res.json())\r\n        .then(data=>{\r\n            setUrl(data.url)\r\n        })\r\n        .catch(err=>{\r\n            console.log(err)\r\n        })  \r\n    }\r\n\r\n\r\n    return(\r\n        <div className=\"card input-field\">\r\n            <input type=\"text\" \r\n            placeholder=\"title\"\r\n            value={title}\r\n            onChange={(e)=>setTitle(e.target.value)}\r\n            />\r\n            <input type=\"text\" \r\n            placeholder=\"body\"\r\n            value={body}\r\n            onChange={(e)=>setBody(e.target.value)}\r\n            />\r\n            <div className=\"file-field input-field\">\r\n                <div className=\"btn black\">\r\n                    <span>Upload</span>\r\n                    <input type=\"file\" onChange={(e)=>setImage(e.target.files[0])}\r\n                    />\r\n                </div>\r\n                <div className=\"file-path-wrapper\">\r\n                    <input className=\"file-path validate\" type=\"text\"/>\r\n                </div>\r\n                </div>\r\n                <button className=\"btn waves-effect waves-light black \"\r\n                onClick={()=>postDetails()}\r\n                >\r\n                    POST\r\n                </button>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default CreatePost"]},"metadata":{},"sourceType":"module"}