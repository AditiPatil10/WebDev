{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _slicedToArray from\"D:/Alumni/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useContext}from'react';import{Link,useHistory}from'react-router-dom';import{UserContext}from'../../App';import M from'materialize-css';import{reducer,initialState}from'../../reducers/userReducer';var Signin=function Signin(){var _useContext=useContext(UserContext),state=_useContext.state,dispatch=_useContext.dispatch;var history=useHistory();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),password=_useState2[0],setPasword=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var PostData=function PostData(){if(!/^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/.test(email)){M.toast({html:\"invalid email\",classes:\"#c62828 red darken-3\"});return;}fetch(\"/signin\",{method:\"post\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({password:password,email:email})}).then(function(res){return res.json();}).then(function(data){console.log(data);if(data.error){M.toast({html:data.error,classes:\"#c62828 red darken-3\"});}else{localStorage.setItem(\"jwt\",data.token);localStorage.setItem(\"user\",JSON.stringify(data.user));//dispatch({type:\"USER\",payload: data.user})\nM.toast({html:\"signed in successfully\",classes:\"#43a047 green darken-1\"});history.push('/');}}).catch(function(err){console.log(err);});};return/*#__PURE__*/_jsx(\"div\",{className:\"mycard\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card auth-card input-field\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"AlumniTracker\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"email\",value:email,onChange:function onChange(e){return setEmail(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"password\",value:password,onChange:function onChange(e){return setPasword(e.target.value);}}),/*#__PURE__*/_jsx(\"button\",{className:\"btn waves-effect waves-light #64b5f6 black\",onClick:function onClick(){return PostData();},children:\"Login\"}),/*#__PURE__*/_jsx(\"h5\",{children:/*#__PURE__*/_jsx(Link,{to:\"/signup\",children:\"Don't have an account ?\"})}),/*#__PURE__*/_jsx(\"h6\",{children:/*#__PURE__*/_jsx(Link,{to:\"/reset\",children:\"Forgot password ?\"})})]})});};export default Signin;","map":{"version":3,"sources":["D:/Alumni/client/src/components/screens/Signin.js"],"names":["React","useState","useContext","Link","useHistory","UserContext","M","reducer","initialState","Signin","state","dispatch","history","password","setPasword","email","setEmail","PostData","test","toast","html","classes","fetch","method","headers","body","JSON","stringify","then","res","json","data","console","log","error","localStorage","setItem","token","user","push","catch","err","e","target","value"],"mappings":"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","sourcesContent":["import React,{useState,useContext} from 'react'\r\nimport {Link,useHistory} from 'react-router-dom'\r\nimport {UserContext} from '../../App'\r\nimport M from 'materialize-css'\r\nimport {reducer,initialState} from '../../reducers/userReducer'\r\n\r\n\r\nconst Signin  = ()=>{\r\n    const {state,dispatch} = useContext(UserContext)\r\n    const history = useHistory()\r\n    const [password,setPasword] = useState(\"\")\r\n    const [email,setEmail] = useState(\"\")\r\n    const PostData = ()=>{\r\n        if(!/^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/.test(email)){\r\n            M.toast({html: \"invalid email\",classes:\"#c62828 red darken-3\"})\r\n            return\r\n        }\r\n        fetch(\"/signin\",{\r\n            method:\"post\",\r\n            headers:{\r\n                \"Content-Type\":\"application/json\"\r\n            },\r\n            body:JSON.stringify({\r\n                password,\r\n                email\r\n            })\r\n        \r\n        })\r\n        .then(res=>res.json())\r\n        .then(data=>{\r\n            console.log(data)\r\n           if(data.error){\r\n              M.toast({html: data.error,classes:\"#c62828 red darken-3\"})\r\n           }\r\n           else{\r\n               localStorage.setItem(\"jwt\",data.token)\r\n               localStorage.setItem(\"user\",JSON.stringify(data.user))\r\n               //dispatch({type:\"USER\",payload: data.user})\r\n               M.toast({html:\"signed in successfully\",classes:\"#43a047 green darken-1\"})\r\n               history.push('/')\r\n           }\r\n        }).catch(err=>{\r\n            console.log(err)\r\n        })\r\n    }\r\n   return (\r\n      <div className=\"mycard\">\r\n          <div className=\"card auth-card input-field\">\r\n            <h2>AlumniTracker</h2>\r\n            <input\r\n            type=\"text\"\r\n            placeholder=\"email\"\r\n            value={email}\r\n            onChange={(e)=>setEmail(e.target.value)}\r\n            />\r\n            <input\r\n            type=\"password\"\r\n            placeholder=\"password\"\r\n            value={password}\r\n            onChange={(e)=>setPasword(e.target.value)}\r\n            />\r\n            <button className=\"btn waves-effect waves-light #64b5f6 black\"\r\n            onClick={()=>PostData()}\r\n            >\r\n                Login\r\n            </button>\r\n            <h5>\r\n                <Link to=\"/signup\">Don't have an account ?</Link>\r\n            </h5>\r\n            <h6>\r\n                <Link to=\"/reset\">Forgot password ?</Link>\r\n            </h6>\r\n    \r\n        </div>\r\n      </div>\r\n   )\r\n}\r\n\r\n\r\nexport default Signin"]},"metadata":{},"sourceType":"module"}