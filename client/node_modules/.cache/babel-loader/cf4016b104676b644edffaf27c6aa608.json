{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _slicedToArray from\"D:/Alumni/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useCallback}from'react';var Home=function Home(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];useEffect(function(){fetch('/allpost',{headers:{\"Authorization\":\"Bearer \"+localStorage.getItem(\"jwt\")}}).then(function(res){return res.json();}).then(function(result){console.log(result);setData(result.posts);});},[]);var likePost=function likePost(id){fetch('/like',{method:\"put\",headers:{\"Content-Type\":\"application/json\",\"Authorization\":\"Bearer \"+localStorage.getItem(\"jwt\")},body:JSON.stringify({postId:id})}).then(function(res){return res.json();}).then(function(result){//console.log(result)\nvar newData=data.map(function(item){if(item._id==result._id){return result;}else{return item;}});setData(newData);}).catch(function(err){console.log(err);});};var unlikePost=function unlikePost(id){fetch('/unlike',{method:\"put\",headers:{\"Content-Type\":\"application/json\",\"Authorization\":\"Bearer \"+localStorage.getItem(\"jwt\")},body:JSON.stringify({postId:id})}).then(function(res){return res.json();}).then(function(result){//console.log(result)\nvar newData=data.map(function(item){if(item._id==result._id){return result;}else{return item;}});setData(newData);}).catch(function(err){console.log(err);});};return/*#__PURE__*/_jsx(\"div\",{className:\"home\",children:data.map(function(item){return/*#__PURE__*/_jsxs(\"div\",{className:\"card home-card\",children:[/*#__PURE__*/_jsx(\"h5\",{children:item.postedBy.name}),/*#__PURE__*/_jsx(\"div\",{className:\"card-image\",children:/*#__PURE__*/_jsx(\"img\",{src:item.photo})}),/*#__PURE__*/_jsxs(\"div\",{className:\"class-content\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"material-icons\",children:\"favorite\"}),/*#__PURE__*/_jsx(\"i\",{className:\"material-icons\",onClick:function onClick(){return likePost(item._id);},children:\"thumb_up\"}),/*#__PURE__*/_jsx(\"i\",{className:\"material-icons\",onClick:function onClick(){return unlikePost(item._id);},children:\"thumb_down\"}),/*#__PURE__*/_jsxs(\"h6\",{children:[item.likes.length,\" likes\"]}),/*#__PURE__*/_jsx(\"h6\",{children:item.title}),/*#__PURE__*/_jsx(\"p\",{children:item.body}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"add a comment\"})]})]},item._id);})});};export default Home;","map":{"version":3,"sources":["D:/Alumni/client/src/components/screens/Home.js"],"names":["React","useState","useEffect","useCallback","Home","data","setData","fetch","headers","localStorage","getItem","then","res","json","result","console","log","posts","likePost","id","method","body","JSON","stringify","postId","newData","map","item","_id","catch","err","unlikePost","postedBy","name","photo","likes","length","title"],"mappings":"2LAAA,MAAOA,CAAAA,KAAP,EAAcC,QAAd,CAAuBC,SAAvB,CAAkCC,WAAlC,KAAoD,OAApD,CAGA,GAAMC,CAAAA,IAAI,CAAC,QAALA,CAAAA,IAAK,EAAI,eACUH,QAAQ,CAAC,EAAD,CADlB,wCACJI,IADI,eACCC,OADD,eAEXJ,SAAS,CAAC,UAAI,CACVK,KAAK,CAAC,UAAD,CAAY,CACbC,OAAO,CAAC,CACJ,gBAAgB,UAAUC,YAAY,CAACC,OAAb,CAAqB,KAArB,CADtB,CADK,CAAZ,CAAL,CAKCC,IALD,CAKM,SAAAC,GAAG,QAAEA,CAAAA,GAAG,CAACC,IAAJ,EAAF,EALT,EAMCF,IAND,CAMM,SAAAG,MAAM,CAAE,CACXC,OAAO,CAACC,GAAR,CAAYF,MAAZ,EACAR,OAAO,CAACQ,MAAM,CAACG,KAAR,CAAP,CACH,CATA,EAUH,CAXQ,CAWP,EAXO,CAAT,CAaA,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAACC,EAAD,CAAM,CACnBZ,KAAK,CAAC,OAAD,CAAS,CACVa,MAAM,CAAC,KADG,CAEVZ,OAAO,CAAC,CACJ,eAAe,kBADX,CAEJ,gBAAgB,UAAUC,YAAY,CAACC,OAAb,CAAqB,KAArB,CAFtB,CAFE,CAMVW,IAAI,CAACC,IAAI,CAACC,SAAL,CAAe,CAChBC,MAAM,CAACL,EADS,CAAf,CANK,CAAT,CAAL,CASGR,IATH,CASQ,SAAAC,GAAG,QAAEA,CAAAA,GAAG,CAACC,IAAJ,EAAF,EATX,EAUCF,IAVD,CAUM,SAAAG,MAAM,CAAE,CACV;AACA,GAAMW,CAAAA,OAAO,CAAGpB,IAAI,CAACqB,GAAL,CAAS,SAAAC,IAAI,CAAE,CAC3B,GAAGA,IAAI,CAACC,GAAL,EAAUd,MAAM,CAACc,GAApB,CAAwB,CACpB,MAAOd,CAAAA,MAAP,CACH,CAFD,IAEK,CACD,MAAOa,CAAAA,IAAP,CACH,CACJ,CANe,CAAhB,CAOJrB,OAAO,CAACmB,OAAD,CAAP,CACC,CApBD,EAoBGI,KApBH,CAoBS,SAAAC,GAAG,CAAE,CACVf,OAAO,CAACC,GAAR,CAAYc,GAAZ,EACH,CAtBD,EAuBH,CAxBD,CAyBA,GAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAACZ,EAAD,CAAM,CACrBZ,KAAK,CAAC,SAAD,CAAW,CACZa,MAAM,CAAC,KADK,CAEZZ,OAAO,CAAC,CACJ,eAAe,kBADX,CAEJ,gBAAgB,UAAUC,YAAY,CAACC,OAAb,CAAqB,KAArB,CAFtB,CAFI,CAMZW,IAAI,CAACC,IAAI,CAACC,SAAL,CAAe,CAChBC,MAAM,CAACL,EADS,CAAf,CANO,CAAX,CAAL,CASGR,IATH,CASQ,SAAAC,GAAG,QAAEA,CAAAA,GAAG,CAACC,IAAJ,EAAF,EATX,EAUCF,IAVD,CAUM,SAAAG,MAAM,CAAE,CACV;AACA,GAAMW,CAAAA,OAAO,CAAGpB,IAAI,CAACqB,GAAL,CAAS,SAAAC,IAAI,CAAE,CAC3B,GAAGA,IAAI,CAACC,GAAL,EAAUd,MAAM,CAACc,GAApB,CAAwB,CACpB,MAAOd,CAAAA,MAAP,CACH,CAFD,IAEK,CACD,MAAOa,CAAAA,IAAP,CACH,CACJ,CANe,CAAhB,CAOJrB,OAAO,CAACmB,OAAD,CAAP,CACC,CApBD,EAoBGI,KApBH,CAoBS,SAAAC,GAAG,CAAE,CACVf,OAAO,CAACC,GAAR,CAAYc,GAAZ,EACH,CAtBD,EAuBH,CAxBD,CA0BA,mBACI,YAAK,SAAS,CAAC,MAAf,UAEQzB,IAAI,CAACqB,GAAL,CAAS,SAAAC,IAAI,CAAE,CACX,mBACI,aAAK,SAAS,CAAC,gBAAf,wBACI,oBAAKA,IAAI,CAACK,QAAL,CAAcC,IAAnB,EADJ,cAEI,YAAK,SAAS,CAAC,YAAf,uBACI,YAAK,GAAG,CAAEN,IAAI,CAACO,KAAf,EADJ,EAFJ,cAKI,aAAK,SAAS,CAAC,eAAf,wBACI,UAAG,SAAS,CAAC,gBAAb,sBADJ,cAEI,UAAG,SAAS,CAAC,gBAAb,CACA,OAAO,CAAE,yBAAKhB,CAAAA,QAAQ,CAACS,IAAI,CAACC,GAAN,CAAb,EADT,sBAFJ,cAKI,UAAG,SAAS,CAAC,gBAAb,CACA,OAAO,CAAE,yBAAKG,CAAAA,UAAU,CAACJ,IAAI,CAACC,GAAN,CAAf,EADT,wBALJ,cAQI,sBAAKD,IAAI,CAACQ,KAAL,CAAWC,MAAhB,YARJ,cASI,oBAAKT,IAAI,CAACU,KAAV,EATJ,cAUI,mBAAIV,IAAI,CAACN,IAAT,EAVJ,cAWI,cAAO,IAAI,CAAC,MAAZ,CAAmB,WAAW,CAAC,eAA/B,EAXJ,GALJ,GAAqCM,IAAI,CAACC,GAA1C,CADJ,CAqBH,CAtBD,CAFR,EADJ,CA8BH,CAhGD,CAkGA,cAAexB,CAAAA,IAAf","sourcesContent":["import React,{useState,useEffect, useCallback} from 'react'\r\n\r\n\r\nconst Home=()=>{\r\n    const [data,setData]=useState([])\r\n    useEffect(()=>{\r\n        fetch('/allpost',{\r\n            headers:{\r\n                \"Authorization\":\"Bearer \"+localStorage.getItem(\"jwt\")\r\n            }\r\n        })\r\n        .then(res=>res.json())\r\n        .then(result=>{\r\n           console.log(result)\r\n           setData(result.posts)\r\n       })  \r\n    },[])\r\n\r\n    const likePost = (id)=>{\r\n        fetch('/like',{\r\n            method:\"put\",\r\n            headers:{\r\n                \"Content-Type\":\"application/json\",\r\n                \"Authorization\":\"Bearer \"+localStorage.getItem(\"jwt\")\r\n            },\r\n            body:JSON.stringify({\r\n                postId:id\r\n            })\r\n        }).then(res=>res.json())\r\n        .then(result=>{\r\n            //console.log(result)\r\n            const newData = data.map(item=>{\r\n                if(item._id==result._id){\r\n                    return result\r\n                }else{\r\n                    return item\r\n                }\r\n            })\r\n        setData(newData)\r\n        }).catch(err=>{\r\n            console.log(err)\r\n        })\r\n    }\r\n    const unlikePost = (id)=>{\r\n        fetch('/unlike',{\r\n            method:\"put\",\r\n            headers:{\r\n                \"Content-Type\":\"application/json\",\r\n                \"Authorization\":\"Bearer \"+localStorage.getItem(\"jwt\")\r\n            },\r\n            body:JSON.stringify({\r\n                postId:id\r\n            })\r\n        }).then(res=>res.json())\r\n        .then(result=>{\r\n            //console.log(result)\r\n            const newData = data.map(item=>{\r\n                if(item._id==result._id){\r\n                    return result\r\n                }else{\r\n                    return item\r\n                }\r\n            })\r\n        setData(newData)\r\n        }).catch(err=>{\r\n            console.log(err)\r\n        })\r\n    }\r\n\r\n    return(\r\n        <div className=\"home\">\r\n            {\r\n                data.map(item=>{\r\n                    return(\r\n                        <div className=\"card home-card\" key={item._id}>\r\n                            <h5>{item.postedBy.name}</h5>\r\n                            <div className=\"card-image\">\r\n                                <img src={item.photo}></img>\r\n                            </div>\r\n                            <div className=\"class-content\">\r\n                                <i className=\"material-icons\">favorite</i>\r\n                                <i className=\"material-icons\"\r\n                                onClick={()=>(likePost(item._id))}\r\n                                >thumb_up</i>\r\n                                <i className=\"material-icons\"\r\n                                onClick={()=>(unlikePost(item._id))}\r\n                                >thumb_down</i>\r\n                                <h6>{item.likes.length} likes</h6>\r\n                                <h6>{item.title}</h6>\r\n                                <p>{item.body}</p>\r\n                                <input type=\"text\" placeholder=\"add a comment\"></input>\r\n                            </div>\r\n                        </div>\r\n                    )\r\n                })\r\n            }\r\n            \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Home"]},"metadata":{},"sourceType":"module"}