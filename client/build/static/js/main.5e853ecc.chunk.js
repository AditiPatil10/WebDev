(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{25:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n(1),i=n.n(a),s=n(18),r=n.n(s),o=(n(25),n(2)),l=n(5),d=n(11),j=null,u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;return"USER"===t.type?t.payload:"CLEAR"==t.type?null:"UPDATE"==t.type?Object(d.a)({},e):"UPDATEPIC"==t.type?Object(d.a)(Object(d.a)({},e),{},{pic:t.payload}):(console.log(e),e)},h=function(){var e=Object(a.useReducer)(u,j),t=Object(o.a)(e,2),n=t[0];t[1];return Object(c.jsx)("nav",{children:Object(c.jsxs)("div",{className:"nav-wrapper white",children:[Object(c.jsx)(l.b,{to:n?"/":"/signin",className:"brand-logo left",children:"VJTI"}),Object(c.jsx)("ul",{id:"nav-mobile",className:"right",children:JSON.parse(n)?[Object(c.jsx)("li",{children:Object(c.jsx)(l.b,{to:"/profile",children:"Profile"})}),Object(c.jsx)("li",{children:Object(c.jsx)(l.b,{to:"/create",children:"Create Post"})})]:[Object(c.jsx)("li",{children:Object(c.jsx)(l.b,{to:"/signup",children:"Signup"})}),Object(c.jsx)("li",{children:Object(c.jsx)(l.b,{to:"/signin",children:"Signin"})})]})]})})},p=(n(33),n(3)),b=function(){var e=Object(a.useState)([]),t=Object(o.a)(e,2),n=t[0],i=t[1];Object(a.useEffect)((function(){fetch("/allpost",{headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(e){console.log(e),i(e.posts)}))}),[]);return Object(c.jsx)("div",{className:"home",children:n.map((function(e){return Object(c.jsxs)("div",{className:"card home-card",children:[Object(c.jsx)("h5",{children:e.postedBy.name}),Object(c.jsx)("div",{className:"card-image",children:Object(c.jsx)("img",{src:e.photo})}),Object(c.jsxs)("div",{className:"class-content",children:[Object(c.jsx)("i",{className:"material-icons",children:"favorite"}),Object(c.jsx)("i",{className:"material-icons",onClick:function(){return t=e._id,void fetch("/like",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({postId:t})}).then((function(e){return e.json()})).then((function(e){var t=n.map((function(t){return t._id==e._id?e:t}));i(t)})).catch((function(e){console.log(e)}));var t},children:"thumb_up"}),Object(c.jsx)("i",{className:"material-icons",onClick:function(){return t=e._id,void fetch("/unlike",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({postId:t})}).then((function(e){return e.json()})).then((function(e){var t=n.map((function(t){return t._id==e._id?e:t}));i(t)})).catch((function(e){console.log(e)}));var t},children:"thumb_down"}),Object(c.jsxs)("h6",{children:[e.likes.length," likes"]}),Object(c.jsx)("h6",{children:e.title}),Object(c.jsx)("p",{children:e.body}),Object(c.jsx)("input",{type:"text",placeholder:"add a comment"})]})]},e._id)}))})},f=function(){var e=Object(a.useState)([]),t=Object(o.a)(e,2),n=t[0],i=t[1],s=Object(a.useContext)(y),r=s.state,l=s.dispatch,j=Object(a.useState)(""),u=Object(o.a)(j,2),h=u[0],p=u[1];return Object(a.useEffect)((function(){fetch("/mypost",{headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(e){console.log(e),i(e.mypost)}))}),[]),Object(a.useEffect)((function(){if(h){var e=new FormData;e.append("file",h),e.append("upload_preset","alumni-tracker"),e.append("cloud_name","aditicloudinary1"),fetch("https://api.cloudinary.com/v1_1/aditicloudinary1/image/upload",{method:"post",body:e}).then((function(e){return e.json()})).then((function(e){fetch("/updatepic",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({pic:e.url})}).then((function(e){return e.json()})).then((function(e){console.log(e),localStorage.setItem("user",JSON.stringify(Object(d.a)(Object(d.a)({},r),{},{pic:e.pic}))),l({type:"UPDATEPIC",payload:e.pic})}))})).catch((function(e){console.log(e)}))}}),[h]),Object(c.jsxs)("div",{style:{maxWidth:"550px",margin:"0px auto"},children:[Object(c.jsxs)("div",{style:{margin:"18px 0px",borderBottom:"1px solid grey"},children:[Object(c.jsxs)("div",{style:{display:"flex",justifyContent:"space-around"},children:[Object(c.jsx)("div",{children:Object(c.jsx)("img",{style:{width:"160px",height:"160px",borderRadius:"80px"},src:r?r.pic:"loading"})}),Object(c.jsxs)("div",{children:[Object(c.jsx)("h4",{children:r?r.name:"loading"}),Object(c.jsx)("h5",{children:r?r.email:"loading"}),Object(c.jsx)("div",{style:{display:"flex",justifyContent:"space-between",width:"108%"},children:Object(c.jsxs)("h6",{children:["posts:",n.length]})})]})]}),Object(c.jsxs)("div",{className:"file-field input-field",style:{margin:"30px"},children:[Object(c.jsxs)("div",{className:"btn #64b5f6 black ",children:[Object(c.jsx)("span",{children:"Update pic"}),Object(c.jsx)("input",{type:"file",onChange:function(e){return t=e.target.files[0],void p(t);var t}})]}),Object(c.jsx)("div",{className:"file-path-wrapper",children:Object(c.jsx)("input",{className:"file-path validate",type:"text"})})]})]}),Object(c.jsx)("div",{className:"gallery",children:n.map((function(e){return Object(c.jsx)("img",{className:"item",src:e.photo,alt:e.title},e._id)}))})]})},O=n(9),x=n.n(O),m=function(){var e=Object(a.useContext)(y),t=(e.state,e.dispatch,Object(p.f)()),n=Object(a.useState)(""),i=Object(o.a)(n,2),s=i[0],r=i[1],d=Object(a.useState)(""),j=Object(o.a)(d,2),u=j[0],h=j[1];return Object(c.jsx)("div",{className:"mycard",children:Object(c.jsxs)("div",{className:"card auth-card input-field",children:[Object(c.jsx)("h2",{children:"AlumniTracker"}),Object(c.jsx)("input",{type:"text",placeholder:"email",value:u,onChange:function(e){return h(e.target.value)}}),Object(c.jsx)("input",{type:"password",placeholder:"password",value:s,onChange:function(e){return r(e.target.value)}}),Object(c.jsx)("button",{className:"btn waves-effect waves-light #64b5f6 black",onClick:function(){/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(u)?fetch("/signin",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:s,email:u})}).then((function(e){return e.json()})).then((function(e){console.log(e),e.error?x.a.toast({html:e.error,classes:"#c62828 red darken-3"}):(localStorage.setItem("jwt",e.token),localStorage.setItem("user",JSON.stringify(e.user)),x.a.toast({html:"signed in successfully",classes:"#43a047 green darken-1"}),t.push("/"))})).catch((function(e){console.log(e)})):x.a.toast({html:"invalid email",classes:"#c62828 red darken-3"})},children:"Login"}),Object(c.jsx)("h5",{children:Object(c.jsx)(l.b,{to:"/signup",children:"Don't have an account ?"})}),Object(c.jsx)("h6",{children:Object(c.jsx)(l.b,{to:"/reset",children:"Forgot password ?"})})]})})},g=function(){var e=Object(p.f)(),t=Object(a.useState)(""),n=Object(o.a)(t,2),i=n[0],s=n[1],r=Object(a.useState)(""),d=Object(o.a)(r,2),j=d[0],u=d[1],h=Object(a.useState)(""),b=Object(o.a)(h,2),f=b[0],O=b[1],m=Object(a.useState)(""),g=Object(o.a)(m,2),v=g[0],y=g[1],N=Object(a.useState)(void 0),S=Object(o.a)(N,2),w=S[0],C=S[1];Object(a.useEffect)((function(){w&&k()}),[w]);var k=function(){/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(f)?fetch("/signup",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:i,password:j,email:f,pic:w})}).then((function(e){return e.json()})).then((function(t){t.error?x.a.toast({html:t.error,classes:"#c62828 red darken-3"}):(x.a.toast({html:t.message,classes:"#43a047 green darken-1"}),e.push("/signin"))})).catch((function(e){console.log(e)})):x.a.toast({html:"invalid email",classes:"#c62828 red darken-3"})},_=function(){v?function(){var e=new FormData;e.append("file",v),e.append("upload_preset","Alumni-tracker"),e.append("cloud_name","aditicloudinary1"),fetch("https://api.cloudinary.com/v1_1/aditicloudinary1/image/upload",{method:"post",body:e}).then((function(e){return e.json()})).then((function(e){C(e.url)})).catch((function(e){console.log(e)}))}():k()};return Object(c.jsx)("div",{className:"mycard",children:Object(c.jsxs)("div",{className:"card auth-card input-field",children:[Object(c.jsx)("h2",{children:"Alumni"}),Object(c.jsx)("input",{type:"text",placeholder:"name",value:i,onChange:function(e){return s(e.target.value)}}),Object(c.jsx)("input",{type:"text",placeholder:"email",value:f,onChange:function(e){return O(e.target.value)}}),Object(c.jsx)("input",{type:"password",placeholder:"password",value:j,onChange:function(e){return u(e.target.value)}}),Object(c.jsxs)("div",{className:"file-field input-field",children:[Object(c.jsxs)("div",{className:"btn #64b5f6 black",children:[Object(c.jsx)("span",{children:"Upload pic"}),Object(c.jsx)("input",{type:"file",onChange:function(e){return y(e.target.files[0])}})]}),Object(c.jsx)("div",{className:"file-path-wrapper",children:Object(c.jsx)("input",{className:"file-path validate",type:"text"})})]}),Object(c.jsx)("button",{className:"btn waves-effect waves-light #64b5f6 black darken-1",onClick:function(){return _()},children:"SignUP"}),Object(c.jsx)("h5",{children:Object(c.jsx)(l.b,{to:"/signin",children:"Already have an account ?"})})]})})},v=function(){var e=Object(p.f)(),t=Object(a.useState)(""),n=Object(o.a)(t,2),i=n[0],s=n[1],r=Object(a.useState)(""),l=Object(o.a)(r,2),d=l[0],j=l[1],u=Object(a.useState)(""),h=Object(o.a)(u,2),b=h[0],f=h[1],O=Object(a.useState)(""),m=Object(o.a)(O,2),g=m[0],v=m[1];Object(a.useEffect)((function(){g&&fetch("/create",{method:"post",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({title:i,body:d,pic:g})}).then((function(e){return e.json()})).then((function(t){console.log(t),t.error?x.a.toast({html:t.error,classes:"#c62828 red darken-3"}):(x.a.toast({html:"Posted",classes:"#43a047 green darken-1"}),e.push("/"))})).catch((function(e){console.log(e)}))}),[g]);return Object(c.jsxs)("div",{className:"card input-field",children:[Object(c.jsx)("input",{type:"text",placeholder:"title",value:i,onChange:function(e){return s(e.target.value)}}),Object(c.jsx)("input",{type:"text",placeholder:"body",value:d,onChange:function(e){return j(e.target.value)}}),Object(c.jsxs)("div",{className:"file-field input-field",children:[Object(c.jsxs)("div",{className:"btn black",children:[Object(c.jsx)("span",{children:"Upload"}),Object(c.jsx)("input",{type:"file",onChange:function(e){return f(e.target.files[0])}})]}),Object(c.jsx)("div",{className:"file-path-wrapper",children:Object(c.jsx)("input",{className:"file-path validate",type:"text"})})]}),Object(c.jsx)("button",{className:"btn waves-effect waves-light black ",onClick:function(){return function(){var e=new FormData;e.append("file",b),e.append("upload_preset","alumni-tracker"),e.append("cloud_name","aditicloudinary1"),fetch("https://api.cloudinary.com/v1_1/aditicloudinary1/image/upload",{method:"post",body:e}).then((function(e){return e.json()})).then((function(e){v(e.url)})).catch((function(e){console.log(e)}))}()},children:"POST"})]})},y=Object(a.createContext)(),N=function(){var e=Object(p.f)(),t=Object(a.useContext)(y);t.state,t.dispatch;return Object(a.useEffect)((function(){JSON.parse(localStorage.getItem("user"))?e.push("/"):e.push("/signin")}),[]),Object(c.jsxs)(p.c,{children:[Object(c.jsx)(p.a,{exact:!0,path:"/",children:Object(c.jsx)(b,{})}),Object(c.jsx)(p.a,{path:"/signup",children:Object(c.jsx)(g,{})}),Object(c.jsx)(p.a,{path:"/signin",children:Object(c.jsx)(m,{})}),Object(c.jsx)(p.a,{path:"/profile",children:Object(c.jsx)(f,{})}),Object(c.jsx)(p.a,{path:"/create",children:Object(c.jsx)(v,{})})]})};var S=function(){var e=Object(a.useReducer)(u,j),t=Object(o.a)(e,2),n=(t[0],t[1]);return Object(c.jsx)(y.Provider,{value:n,children:Object(c.jsxs)(l.a,{children:[Object(c.jsx)(h,{}),Object(c.jsx)(N,{})]})})},w=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,35)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),i(e),s(e)}))};r.a.render(Object(c.jsx)(i.a.StrictMode,{children:Object(c.jsx)(S,{})}),document.getElementById("root")),w()}},[[34,1,2]]]);
//# sourceMappingURL=main.5e853ecc.chunk.js.map